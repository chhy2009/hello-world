<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Taskflow Handbook</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/x-icon" href="favicon.ico" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="taskflow_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname"><a href="https://taskflow.github.io/">Taskflow</a>
   &#160;<span id="projectnumber">3.2.0-Master-Branch</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('ExecuteTaskflow.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Executor</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#CreateAnExecutor">Create an Executor</a></li>
<li class="level1"><a href="#ExecuteATaskflow">Execute a Taskflow</a></li>
<li class="level1"><a href="#ExecuteATaskflowWithTransferredOwnership">Execute a Taskflow with Transferred Ownership</a></li>
<li class="level1"><a href="#ThreadSafety">Touch an Executor from Multiple Threads</a></li>
<li class="level1"><a href="#QueryTheWorkerID">Query the Worker Identieir</a></li>
<li class="level1"><a href="#ObserveThreadActivities">Observe Thread Activities</a></li>
</ul>
</div>
<div class="textblock"><p>After you create a task dependency graph, you need to submit it to threads for execution. In this chapter, we will show you how to execute a task dependency graph.</p>
<h1><a class="anchor" id="CreateAnExecutor"></a>
Create an Executor</h1>
<p>To execute a taskflow, you need to create an <em>executor</em> of type <a class="el" href="classtf_1_1Executor.html" title="class to create an executor for running a taskflow graph">tf::Executor</a>. An executor is a <em>thread-safe</em> object that manages a set of worker threads and executes tasks through an efficient <em>work-stealing</em> algorithm. Issuing a call to run a taskflow creates a <em>topology</em>, a data structure to keep track of the execution status of a running graph. <a class="el" href="classtf_1_1Executor.html" title="class to create an executor for running a taskflow graph">tf::Executor</a> takes an unsigned integer to construct with <code>N</code> worker threads. The default value is <a class="elRef" href="http://en.cppreference.com/w/cpp/thread/thread/hardware_concurrency.html">std::thread::hardware_concurrency</a>.</p>
<div class="fragment"><div class="line"><a class="code hl_class" href="classtf_1_1Executor.html">tf::Executor</a> executor1;     <span class="comment">// create an executor with the number of workers</span></div>
<div class="line">                            <span class="comment">// equal to std::thread::hardware_concurrency</span></div>
<div class="line"><a class="code hl_class" href="classtf_1_1Executor.html">tf::Executor</a> executor2(4);  <span class="comment">// create an executor of 4 worker threads</span></div>
<div class="ttc" id="aclasstf_1_1Executor_html"><div class="ttname"><a href="classtf_1_1Executor.html">tf::Executor</a></div><div class="ttdoc">class to create an executor for running a taskflow graph</div><div class="ttdef"><b>Definition</b> executor.hpp:50</div></div>
</div><!-- fragment --><p>An executor can be reused to execute multiple taskflows. In most workloads, you may need only one executor to run multiple taskflows where each taskflow represents a part of a parallel decomposition.</p>
<h1><a class="anchor" id="ExecuteATaskflow"></a>
Execute a Taskflow</h1>
<p><a class="el" href="classtf_1_1Executor.html" title="class to create an executor for running a taskflow graph">tf::Executor</a> provides a set of <code>run_*</code> methods, <a class="el" href="classtf_1_1Executor.html#a519777f5783981d534e9e53b99712069" title="runs a taskflow once">tf::Executor::run</a>, <a class="el" href="classtf_1_1Executor.html#a6d0617eebc9421f1ba1f82ce6dd02c00" title="runs a taskflow for N times">tf::Executor::run_n</a>, and <a class="el" href="classtf_1_1Executor.html#a0f52e9dd64b65aba32ca0e13c1ed300a" title="runs a taskflow multiple times until the predicate becomes true">tf::Executor::run_until</a> to run a taskflow for one time, multiple times, or until a given predicate evaluates to true. All methods accept an optional callback to invoke after the execution completes, and return a <a class="el" href="classtf_1_1Future.html" title="class to access the result of an execution">tf::Future</a> for users to access the execution status. The code below shows several ways to run a taskflow.</p>
<div class="fragment"><div class="line"> 1: <span class="comment">// Declare an executor and a taskflow</span></div>
<div class="line"> 2: <a class="code hl_class" href="classtf_1_1Executor.html">tf::Executor</a> executor;</div>
<div class="line"> 3: <a class="code hl_class" href="classtf_1_1Taskflow.html">tf::Taskflow</a> taskflow;</div>
<div class="line"> 4:</div>
<div class="line"> 5: <span class="comment">// Add three tasks into the taskflow</span></div>
<div class="line"> 6: <a class="code hl_class" href="classtf_1_1Task.html">tf::Task</a> A = taskflow.<a class="code hl_function" href="classtf_1_1FlowBuilder.html#a60d7a666cab71ecfa3010b2efb0d6b57">emplace</a>([] () { <a class="code hl_classRef" href="http://en.cppreference.com/w/cpp/io/basic_ostream.html">std::cout</a> &lt;&lt; <span class="stringliteral">&quot;This is TaskA\n&quot;</span>; });</div>
<div class="line"> 7: <a class="code hl_class" href="classtf_1_1Task.html">tf::Task</a> B = taskflow.<a class="code hl_function" href="classtf_1_1FlowBuilder.html#a60d7a666cab71ecfa3010b2efb0d6b57">emplace</a>([] () { <a class="code hl_classRef" href="http://en.cppreference.com/w/cpp/io/basic_ostream.html">std::cout</a> &lt;&lt; <span class="stringliteral">&quot;This is TaskB\n&quot;</span>; });</div>
<div class="line"> 8: <a class="code hl_class" href="classtf_1_1Task.html">tf::Task</a> C = taskflow.<a class="code hl_function" href="classtf_1_1FlowBuilder.html#a60d7a666cab71ecfa3010b2efb0d6b57">emplace</a>([] () { <a class="code hl_classRef" href="http://en.cppreference.com/w/cpp/io/basic_ostream.html">std::cout</a> &lt;&lt; <span class="stringliteral">&quot;This is TaskC\n&quot;</span>; });</div>
<div class="line"> 9: </div>
<div class="line">10: <span class="comment">// Build precedence between tasks</span></div>
<div class="line">11: A.<a class="code hl_function" href="classtf_1_1Task.html#a8c78c453295a553c1c016e4062da8588">precede</a>(B, C); </div>
<div class="line">12: </div>
<div class="line">13: <a class="code hl_class" href="classtf_1_1Future.html">tf::Future&lt;void&gt;</a> fu = executor.<a class="code hl_function" href="classtf_1_1Executor.html#a519777f5783981d534e9e53b99712069">run</a>(taskflow);</div>
<div class="line">14: fu.wait();                <span class="comment">// block until the execution completes</span></div>
<div class="line">15:</div>
<div class="line">16: executor.<a class="code hl_function" href="classtf_1_1Executor.html#a519777f5783981d534e9e53b99712069">run</a>(taskflow, [](){ <a class="code hl_classRef" href="http://en.cppreference.com/w/cpp/io/basic_ostream.html">std::cout</a> &lt;&lt; <span class="stringliteral">&quot;end of 1 run&quot;</span>; }).wait();</div>
<div class="line">17: executor.<a class="code hl_function" href="classtf_1_1Executor.html#a6d0617eebc9421f1ba1f82ce6dd02c00">run_n</a>(taskflow, 4);</div>
<div class="line">18: executor.<a class="code hl_function" href="classtf_1_1Executor.html#ab9aa252f70e9a40020a1e5a89d485b85">wait_for_all</a>();  <span class="comment">// block until all associated executions finish</span></div>
<div class="line">19: executor.<a class="code hl_function" href="classtf_1_1Executor.html#a6d0617eebc9421f1ba1f82ce6dd02c00">run_n</a>(taskflow, 4, [](){ <a class="code hl_classRef" href="http://en.cppreference.com/w/cpp/io/basic_ostream.html">std::cout</a> &lt;&lt; <span class="stringliteral">&quot;end of 4 runs&quot;</span>; }).wait();</div>
<div class="line">20: executor.<a class="code hl_function" href="classtf_1_1Executor.html#a0f52e9dd64b65aba32ca0e13c1ed300a">run_until</a>(taskflow, [cnt=0] () <span class="keyword">mutable</span> { <span class="keywordflow">return</span> ++cnt == 10; });</div>
<div class="ttc" id="abasic_ostream_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/io/basic_ostream.html">std::cout</a></div></div>
<div class="ttc" id="aclasstf_1_1Executor_html_a0f52e9dd64b65aba32ca0e13c1ed300a"><div class="ttname"><a href="classtf_1_1Executor.html#a0f52e9dd64b65aba32ca0e13c1ed300a">tf::Executor::run_until</a></div><div class="ttdeci">tf::Future&lt; void &gt; run_until(Taskflow &amp;taskflow, P &amp;&amp;pred)</div><div class="ttdoc">runs a taskflow multiple times until the predicate becomes true</div><div class="ttdef"><b>Definition</b> executor.hpp:1622</div></div>
<div class="ttc" id="aclasstf_1_1Executor_html_a519777f5783981d534e9e53b99712069"><div class="ttname"><a href="classtf_1_1Executor.html#a519777f5783981d534e9e53b99712069">tf::Executor::run</a></div><div class="ttdeci">tf::Future&lt; void &gt; run(Taskflow &amp;taskflow)</div><div class="ttdoc">runs a taskflow once</div><div class="ttdef"><b>Definition</b> executor.hpp:1573</div></div>
<div class="ttc" id="aclasstf_1_1Executor_html_a6d0617eebc9421f1ba1f82ce6dd02c00"><div class="ttname"><a href="classtf_1_1Executor.html#a6d0617eebc9421f1ba1f82ce6dd02c00">tf::Executor::run_n</a></div><div class="ttdeci">tf::Future&lt; void &gt; run_n(Taskflow &amp;taskflow, size_t N)</div><div class="ttdoc">runs a taskflow for N times</div><div class="ttdef"><b>Definition</b> executor.hpp:1595</div></div>
<div class="ttc" id="aclasstf_1_1Executor_html_ab9aa252f70e9a40020a1e5a89d485b85"><div class="ttname"><a href="classtf_1_1Executor.html#ab9aa252f70e9a40020a1e5a89d485b85">tf::Executor::wait_for_all</a></div><div class="ttdeci">void wait_for_all()</div><div class="ttdoc">wait for all tasks to complete</div><div class="ttdef"><b>Definition</b> executor.hpp:1709</div></div>
<div class="ttc" id="aclasstf_1_1FlowBuilder_html_a60d7a666cab71ecfa3010b2efb0d6b57"><div class="ttname"><a href="classtf_1_1FlowBuilder.html#a60d7a666cab71ecfa3010b2efb0d6b57">tf::FlowBuilder::emplace</a></div><div class="ttdeci">Task emplace(C &amp;&amp;callable)</div><div class="ttdoc">creates a static task</div><div class="ttdef"><b>Definition</b> flow_builder.hpp:742</div></div>
<div class="ttc" id="aclasstf_1_1Future_html"><div class="ttname"><a href="classtf_1_1Future.html">tf::Future</a></div><div class="ttdoc">class to access the result of an execution</div><div class="ttdef"><b>Definition</b> core/taskflow.hpp:571</div></div>
<div class="ttc" id="aclasstf_1_1Task_html"><div class="ttname"><a href="classtf_1_1Task.html">tf::Task</a></div><div class="ttdoc">class to create a task handle over a node in a taskflow graph</div><div class="ttdef"><b>Definition</b> task.hpp:187</div></div>
<div class="ttc" id="aclasstf_1_1Task_html_a8c78c453295a553c1c016e4062da8588"><div class="ttname"><a href="classtf_1_1Task.html#a8c78c453295a553c1c016e4062da8588">tf::Task::precede</a></div><div class="ttdeci">Task &amp; precede(Ts &amp;&amp;... tasks)</div><div class="ttdoc">adds precedence links from this to other tasks</div><div class="ttdef"><b>Definition</b> task.hpp:420</div></div>
<div class="ttc" id="aclasstf_1_1Taskflow_html"><div class="ttname"><a href="classtf_1_1Taskflow.html">tf::Taskflow</a></div><div class="ttdoc">class to create a taskflow object</div><div class="ttdef"><b>Definition</b> core/taskflow.hpp:73</div></div>
</div><!-- fragment --><p>Debrief:</p>
<ul>
<li>Lines 6-8 create a taskflow of three tasks A, B, and C </li>
<li>Lines 13-14 run the taskflow once and wait for completion </li>
<li>Line 16 runs the taskflow once with a callback to invoke when the execution finishes </li>
<li>Lines 17-18 run the taskflow four times and use <a class="el" href="classtf_1_1Executor.html#ab9aa252f70e9a40020a1e5a89d485b85" title="wait for all tasks to complete">tf::Executor::wait_for_all</a> to wait for completion </li>
<li>Line 19 runs the taskflow four times and invokes a callback at the end of the forth execution </li>
<li>Line 20 keeps running the taskflow until the predicate returns true</li>
</ul>
<p>Issuing multiple runs on the same taskflow will automatically <em>synchronize</em> to a sequential chain of executions in the order of run calls.</p>
<div class="fragment"><div class="line">executor.<a class="code hl_function" href="classtf_1_1Executor.html#a519777f5783981d534e9e53b99712069">run</a>(taskflow);         <span class="comment">// execution 1</span></div>
<div class="line">executor.<a class="code hl_function" href="classtf_1_1Executor.html#a6d0617eebc9421f1ba1f82ce6dd02c00">run_n</a>(taskflow, 10);   <span class="comment">// execution 2</span></div>
<div class="line">executor.<a class="code hl_function" href="classtf_1_1Executor.html#a519777f5783981d534e9e53b99712069">run</a>(taskflow);         <span class="comment">// execution 3</span></div>
<div class="line">executor.<a class="code hl_function" href="classtf_1_1Executor.html#ab9aa252f70e9a40020a1e5a89d485b85">wait_for_all</a>();        <span class="comment">// execution 1 -&gt; execution 2 -&gt; execution 3</span></div>
</div><!-- fragment --><dl class="section attention"><dt>Attention</dt><dd>A running taskflow must remain alive during its execution. It is your responsibility to ensure a taskflow not being destructed when it is running. For example, the code below can result undefined behavior.</dd></dl>
<div class="fragment"><div class="line"><a class="code hl_class" href="classtf_1_1Executor.html">tf::Executor</a> executor;  <span class="comment">// create an executor</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// create a taskflow whose lifetime is restricted by the scope</span></div>
<div class="line">{</div>
<div class="line">  <a class="code hl_class" href="classtf_1_1Taskflow.html">tf::Taskflow</a> taskflow;</div>
<div class="line">  </div>
<div class="line">  <span class="comment">// add tasks to the taskflow</span></div>
<div class="line">  <span class="comment">// ... </span></div>
<div class="line"> </div>
<div class="line">  <span class="comment">// run the taskflow</span></div>
<div class="line">  executor.<a class="code hl_function" href="classtf_1_1Executor.html#a519777f5783981d534e9e53b99712069">run</a>(f);</div>
<div class="line"> </div>
<div class="line">} <span class="comment">// leaving the scope will destroy taskflow while it is running, </span></div>
<div class="line">  <span class="comment">// resulting in undefined behavior</span></div>
</div><!-- fragment --><p>Similarly, you should avoid touching a taskflow while it is running.</p>
<div class="fragment"><div class="line"><a class="code hl_class" href="classtf_1_1Taskflow.html">tf::Taskflow</a> taskflow;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Add tasks into the taskflow</span></div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Declare an executor</span></div>
<div class="line"><a class="code hl_class" href="classtf_1_1Executor.html">tf::Executor</a> executor;</div>
<div class="line"> </div>
<div class="line"><a class="code hl_class" href="classtf_1_1Future.html">tf::Future&lt;void&gt;</a> future = taskflow.run(f);  <span class="comment">// non-blocking return</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// alter the taskflow while running leads to undefined behavior </span></div>
<div class="line">f.<a class="code hl_function" href="classtf_1_1FlowBuilder.html#a60d7a666cab71ecfa3010b2efb0d6b57">emplace</a>([](){ <a class="code hl_classRef" href="http://en.cppreference.com/w/cpp/io/basic_ostream.html">std::cout</a> &lt;&lt; <span class="stringliteral">&quot;Add a new task\n&quot;</span>; });</div>
</div><!-- fragment --><p>You must always keep a taskflow alive and must not modify it while it is running on an executor.</p>
<h1><a class="anchor" id="ExecuteATaskflowWithTransferredOwnership"></a>
Execute a Taskflow with Transferred Ownership</h1>
<p>You can transfer the ownership of a taskflow to an executor and run it without wrangling with the lifetime issue of that taskflow. Each <code>run_*</code> method discussed in the previous section comes with an overload that takes a <em>moved</em> taskflow object.</p>
<div class="fragment"><div class="line"><a class="code hl_class" href="classtf_1_1Taskflow.html">tf::Taskflow</a> taskflow;</div>
<div class="line"><a class="code hl_class" href="classtf_1_1Executor.html">tf::Executor</a> executor;</div>
<div class="line"> </div>
<div class="line">taskflow.<a class="code hl_function" href="classtf_1_1FlowBuilder.html#a60d7a666cab71ecfa3010b2efb0d6b57">emplace</a>([](){});</div>
<div class="line"> </div>
<div class="line"><span class="comment">// let the executor manage the lifetime of the submitted taskflow</span></div>
<div class="line">executor.<a class="code hl_function" href="classtf_1_1Executor.html#a519777f5783981d534e9e53b99712069">run</a>(<a class="code hl_functionRef" href="http://en.cppreference.com/w/cpp/utility/move.html">std::move</a>(taskflow));</div>
<div class="line"> </div>
<div class="line"><span class="comment">// now taskflow has no tasks</span></div>
<div class="line">assert(taskflow.<a class="code hl_function" href="classtf_1_1Taskflow.html#af4f03bca084deb5c2228ac8936d33649">num_tasks</a>() == 0);</div>
<div class="ttc" id="aclasstf_1_1Taskflow_html_af4f03bca084deb5c2228ac8936d33649"><div class="ttname"><a href="classtf_1_1Taskflow.html#af4f03bca084deb5c2228ac8936d33649">tf::Taskflow::num_tasks</a></div><div class="ttdeci">size_t num_tasks() const</div><div class="ttdoc">queries the number of tasks</div><div class="ttdef"><b>Definition</b> core/taskflow.hpp:323</div></div>
<div class="ttc" id="amove_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/utility/move.html">std::move</a></div><div class="ttdeci">T move(T... args)</div></div>
</div><!-- fragment --><p>However, you should avoid moving a <em>running</em> taskflow which can result in undefined behavior.</p>
<div class="fragment"><div class="line"><a class="code hl_class" href="classtf_1_1Taskflow.html">tf::Taskflow</a> taskflow;</div>
<div class="line"><a class="code hl_class" href="classtf_1_1Executor.html">tf::Executor</a> executor;</div>
<div class="line"> </div>
<div class="line">taskflow.<a class="code hl_function" href="classtf_1_1FlowBuilder.html#a60d7a666cab71ecfa3010b2efb0d6b57">emplace</a>([](){});</div>
<div class="line"> </div>
<div class="line"><span class="comment">// executor does not manage the lifetime of taskflow</span></div>
<div class="line">executor.<a class="code hl_function" href="classtf_1_1Executor.html#a519777f5783981d534e9e53b99712069">run</a>(taskflow);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// error! you cannot move a taskflow while it is running</span></div>
<div class="line">executor.<a class="code hl_function" href="classtf_1_1Executor.html#a519777f5783981d534e9e53b99712069">run</a>(<a class="code hl_functionRef" href="http://en.cppreference.com/w/cpp/utility/move.html">std::move</a>(taskflow));  </div>
</div><!-- fragment --><p>The correct way to submit a taskflow with moved ownership to an executor is to ensure all previous runs have completed. The executor will automatically release the resources of a moved taskflow right <em>after</em> its execution completes.</p>
<div class="fragment"><div class="line"><span class="comment">// submit the taskflow and wait until it completes</span></div>
<div class="line">executor.<a class="code hl_function" href="classtf_1_1Executor.html#a519777f5783981d534e9e53b99712069">run</a>(taskflow).wait();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// now it&#39;s safe to move the taskflow to the executor and run it</span></div>
<div class="line">executor.<a class="code hl_function" href="classtf_1_1Executor.html#a519777f5783981d534e9e53b99712069">run</a>(<a class="code hl_functionRef" href="http://en.cppreference.com/w/cpp/utility/move.html">std::move</a>(taskflow));  </div>
</div><!-- fragment --><p>Likewise, you cannot move a taskflow that is running on an executor. You must wait until all the previous fires of runs on that taskflow complete before calling move.</p>
<div class="fragment"><div class="line"><span class="comment">// submit the taskflow and wait until it completes</span></div>
<div class="line">executor.<a class="code hl_function" href="classtf_1_1Executor.html#a519777f5783981d534e9e53b99712069">run</a>(taskflow).wait();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// now it&#39;s safe to move the taskflow to another</span></div>
<div class="line"><a class="code hl_class" href="classtf_1_1Taskflow.html">tf::Taskflow</a> moved_taskflow(<a class="code hl_functionRef" href="http://en.cppreference.com/w/cpp/utility/move.html">std::move</a>(taskflow));  </div>
</div><!-- fragment --><h1><a class="anchor" id="ThreadSafety"></a>
Touch an Executor from Multiple Threads</h1>
<p>All <code>run_*</code> methods are <em>thread-safe</em>. You can have multiple threads call these methods from an executor to run different taskflows. However, the order which taskflow runs first is non-deterministic and is up to the runtime.</p>
<div class="fragment"><div class="line"> 1: <a class="code hl_class" href="classtf_1_1Executor.html">tf::Executor</a> executor;</div>
<div class="line"> 2:</div>
<div class="line"> 3: <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;10; ++i) {</div>
<div class="line"> 4:   <a class="code hl_classRef" href="http://en.cppreference.com/w/cpp/thread/thread.html">std::thread</a>([i, &amp;](){</div>
<div class="line"> 5:     <span class="comment">// ... modify my taskflow at i</span></div>
<div class="line"> 6:     executor.<a class="code hl_function" href="classtf_1_1Executor.html#a519777f5783981d534e9e53b99712069">run</a>(taskflows[i]);  <span class="comment">// run my taskflow at i</span></div>
<div class="line"> 7:   }).detach();</div>
<div class="line"> 8: }</div>
<div class="line"> 9:</div>
<div class="line">10: executor.<a class="code hl_function" href="classtf_1_1Executor.html#ab9aa252f70e9a40020a1e5a89d485b85">wait_for_all</a>();</div>
<div class="ttc" id="athread_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/thread/thread.html">std::thread</a></div></div>
</div><!-- fragment --><h1><a class="anchor" id="QueryTheWorkerID"></a>
Query the Worker Identieir</h1>
<p>Each worker in an executor has an unique integer identifier in the range <code>[0, N)</code> that can be queried by the caller thread using <a class="el" href="classtf_1_1Executor.html#a6487d589cb1f6b078b69fd3bb1082345" title="queries the id of the caller thread in this executor">tf::Executor::this_worker_id</a>. If the caller thread is not a worker in the executor, <code>-1</code> is returned. This method is convenient for users to maintain a one-to-one mapping between a worker and its application data structure.</p>
<div class="fragment"><div class="line"><a class="code hl_classRef" href="http://en.cppreference.com/w/cpp/container/vector.html">std::vector&lt;int&gt;</a> worker_vectors[8];       <span class="comment">// one vector per worker</span></div>
<div class="line"> </div>
<div class="line"><a class="code hl_class" href="classtf_1_1Taskflow.html">tf::Taskflow</a> taskflow;</div>
<div class="line"><a class="code hl_class" href="classtf_1_1Executor.html">tf::Executor</a> executor(8);                 <span class="comment">// an executor of eight workers</span></div>
<div class="line"> </div>
<div class="line">assert(executor.<a class="code hl_function" href="classtf_1_1Executor.html#a6487d589cb1f6b078b69fd3bb1082345">this_worker_id</a>() == -1);  <span class="comment">// master thread is not a worker</span></div>
<div class="line"> </div>
<div class="line">taskflow.<a class="code hl_function" href="classtf_1_1FlowBuilder.html#a60d7a666cab71ecfa3010b2efb0d6b57">emplace</a>([&amp;](){</div>
<div class="line">  <span class="keywordtype">int</span> <span class="keywordtype">id</span> = executor.<a class="code hl_function" href="classtf_1_1Executor.html#a6487d589cb1f6b078b69fd3bb1082345">this_worker_id</a>();     <span class="comment">// in the range [0, 8)</span></div>
<div class="line">  <span class="keyword">auto</span>&amp; vec = worker_vectors[worker_id];</div>
<div class="line">  <span class="comment">// ...</span></div>
<div class="line">});</div>
<div class="ttc" id="aclasstf_1_1Executor_html_a6487d589cb1f6b078b69fd3bb1082345"><div class="ttname"><a href="classtf_1_1Executor.html#a6487d589cb1f6b078b69fd3bb1082345">tf::Executor::this_worker_id</a></div><div class="ttdeci">int this_worker_id() const</div><div class="ttdoc">queries the id of the caller thread in this executor</div><div class="ttdef"><b>Definition</b> executor.hpp:820</div></div>
<div class="ttc" id="avector_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/container/vector.html">std::vector</a></div></div>
</div><!-- fragment --><h1><a class="anchor" id="ObserveThreadActivities"></a>
Observe Thread Activities</h1>
<p>You can observe thread activities in an executor when a worker thread participates in executing a task and leaves the execution using <a class="el" href="classtf_1_1ObserverInterface.html" title="class to derive an executor observer">tf::ObserverInterface</a> &ndash; an <em>interface</em> class that provides a set of methods for you to define what to do when a thread enters and leaves the execution context of a task.</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>ObserverInterface {</div>
<div class="line">  <span class="keyword">virtual</span> <a class="code hl_function" href="classtf_1_1ObserverInterface.html#adfd71c3af3ae2ea4f41eed26c1b6f604">~ObserverInterface</a>() = <span class="keywordflow">default</span>;</div>
<div class="line">  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classtf_1_1ObserverInterface.html#a41e6e62f12bf9d9dc4fa74632f6825d9">set_up</a>(<span class="keywordtype">size_t</span> num_workers) = 0;</div>
<div class="line">  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classtf_1_1ObserverInterface.html#a3e3a9f7f1d43691794e487b8787b01a0">on_entry</a>(<a class="code hl_class" href="classtf_1_1WorkerView.html">tf::WorkerView</a> worker_view, <a class="code hl_class" href="classtf_1_1TaskView.html">tf::TaskView</a> task_view) = 0;</div>
<div class="line">  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classtf_1_1ObserverInterface.html#aa59a59a59eadd4eb6ba20ecdfcae882b">on_exit</a>(<a class="code hl_class" href="classtf_1_1WorkerView.html">tf::WorkerView</a> worker_view, <a class="code hl_class" href="classtf_1_1TaskView.html">tf::TaskView</a> task_view) = 0;</div>
<div class="line">};</div>
<div class="ttc" id="aclasstf_1_1ObserverInterface_html_a3e3a9f7f1d43691794e487b8787b01a0"><div class="ttname"><a href="classtf_1_1ObserverInterface.html#a3e3a9f7f1d43691794e487b8787b01a0">tf::ObserverInterface::on_entry</a></div><div class="ttdeci">virtual void on_entry(WorkerView w, TaskView task_view)=0</div><div class="ttdoc">method to call before a worker thread executes a closure</div></div>
<div class="ttc" id="aclasstf_1_1ObserverInterface_html_a41e6e62f12bf9d9dc4fa74632f6825d9"><div class="ttname"><a href="classtf_1_1ObserverInterface.html#a41e6e62f12bf9d9dc4fa74632f6825d9">tf::ObserverInterface::set_up</a></div><div class="ttdeci">virtual void set_up(size_t num_workers)=0</div><div class="ttdoc">constructor-like method to call when the executor observer is fully created</div></div>
<div class="ttc" id="aclasstf_1_1ObserverInterface_html_aa59a59a59eadd4eb6ba20ecdfcae882b"><div class="ttname"><a href="classtf_1_1ObserverInterface.html#aa59a59a59eadd4eb6ba20ecdfcae882b">tf::ObserverInterface::on_exit</a></div><div class="ttdeci">virtual void on_exit(WorkerView w, TaskView task_view)=0</div><div class="ttdoc">method to call after a worker thread executed a closure</div></div>
<div class="ttc" id="aclasstf_1_1ObserverInterface_html_adfd71c3af3ae2ea4f41eed26c1b6f604"><div class="ttname"><a href="classtf_1_1ObserverInterface.html#adfd71c3af3ae2ea4f41eed26c1b6f604">tf::ObserverInterface::~ObserverInterface</a></div><div class="ttdeci">virtual ~ObserverInterface()=default</div><div class="ttdoc">virtual destructor</div></div>
<div class="ttc" id="aclasstf_1_1TaskView_html"><div class="ttname"><a href="classtf_1_1TaskView.html">tf::TaskView</a></div><div class="ttdoc">class to access task information from the observer interface</div><div class="ttdef"><b>Definition</b> task.hpp:638</div></div>
<div class="ttc" id="aclasstf_1_1WorkerView_html"><div class="ttname"><a href="classtf_1_1WorkerView.html">tf::WorkerView</a></div><div class="ttdoc">class to create an immutable view of a worker in an executor</div><div class="ttdef"><b>Definition</b> worker.hpp:78</div></div>
</div><!-- fragment --><p>There are three methods you must define in your derived class, <a class="el" href="classtf_1_1ObserverInterface.html#a41e6e62f12bf9d9dc4fa74632f6825d9" title="constructor-like method to call when the executor observer is fully created">tf::ObserverInterface::set_up</a>, <a class="el" href="classtf_1_1ObserverInterface.html#a3e3a9f7f1d43691794e487b8787b01a0" title="method to call before a worker thread executes a closure">tf::ObserverInterface::on_entry</a>, and <a class="el" href="classtf_1_1ObserverInterface.html#aa59a59a59eadd4eb6ba20ecdfcae882b" title="method to call after a worker thread executed a closure">tf::ObserverInterface::on_exit</a>. The method, <a class="el" href="classtf_1_1ObserverInterface.html#a41e6e62f12bf9d9dc4fa74632f6825d9" title="constructor-like method to call when the executor observer is fully created">tf::ObserverInterface::set_up</a>, is a constructor-like method that will be called by the executor when the observer is constructed. It passes an argument of the number of workers to observer in the executor. You may use it to preallocate or initialize data storage, e.g., an independent vector for each worker. The methods, <a class="el" href="classtf_1_1ObserverInterface.html#a3e3a9f7f1d43691794e487b8787b01a0" title="method to call before a worker thread executes a closure">tf::ObserverInterface::on_entry</a> and <a class="el" href="classtf_1_1ObserverInterface.html#aa59a59a59eadd4eb6ba20ecdfcae882b" title="method to call after a worker thread executed a closure">tf::ObserverInterface::on_exit</a>, are called by a worker thread before and after the execution context of a task, respectively. Both methods provide immutable access to the underlying worker and the running task using <a class="el" href="classtf_1_1WorkerView.html" title="class to create an immutable view of a worker in an executor">tf::WorkerView</a> and <a class="el" href="classtf_1_1TaskView.html" title="class to access task information from the observer interface">tf::TaskView</a>. You may use them to record timepoints and calculate the elapsed time of a task.</p>
<p>You can associate an executor with one or multiple observers (though one is common) using <a class="el" href="classtf_1_1Executor.html#aff77def96ae740d648dd84e571237c83" title="constructs an observer to inspect the activities of worker threads">tf::Executor::make_observer</a>. We use <a class="elRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr</a> to manage the ownership of an observer. The executor loops through each observer and invoke the corresponding methods accordingly.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="taskflow_8hpp.html">taskflow/taskflow.hpp</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">struct </span>MyObserver : <span class="keyword">public</span> <a class="code hl_class" href="classtf_1_1ObserverInterface.html">tf::ObserverInterface</a> {</div>
<div class="line"> </div>
<div class="line">  MyObserver(<span class="keyword">const</span> <a class="code hl_classRef" href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a>&amp; name) {</div>
<div class="line">    <a class="code hl_classRef" href="http://en.cppreference.com/w/cpp/io/basic_ostream.html">std::cout</a> &lt;&lt; <span class="stringliteral">&quot;constructing observer &quot;</span> &lt;&lt; name &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> set_up(<span class="keywordtype">size_t</span> num_workers) <span class="keyword">override</span> <span class="keyword">final</span> {</div>
<div class="line">    <a class="code hl_classRef" href="http://en.cppreference.com/w/cpp/io/basic_ostream.html">std::cout</a> &lt;&lt; <span class="stringliteral">&quot;setting up observer with &quot;</span> &lt;&lt; num_workers &lt;&lt; <span class="stringliteral">&quot; workers\n&quot;</span>;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> on_entry(<a class="code hl_class" href="classtf_1_1WorkerView.html">tf::WorkerView</a> w, <a class="code hl_class" href="classtf_1_1TaskView.html">tf::TaskView</a> tv) <span class="keyword">override</span> <span class="keyword">final</span> {</div>
<div class="line">    <a class="code hl_classRef" href="http://en.cppreference.com/w/cpp/io/basic_ostringstream.html">std::ostringstream</a> oss;</div>
<div class="line">    oss &lt;&lt; <span class="stringliteral">&quot;worker &quot;</span> &lt;&lt; w.id() &lt;&lt; <span class="stringliteral">&quot; ready to run &quot;</span> &lt;&lt; tv.name() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line">    <a class="code hl_classRef" href="http://en.cppreference.com/w/cpp/io/basic_ostream.html">std::cout</a> &lt;&lt; oss.str();</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> on_exit(<a class="code hl_class" href="classtf_1_1WorkerView.html">tf::WorkerView</a> w, <a class="code hl_class" href="classtf_1_1TaskView.html">tf::TaskView</a> tv) <span class="keyword">override</span> <span class="keyword">final</span> {</div>
<div class="line">    <a class="code hl_classRef" href="http://en.cppreference.com/w/cpp/io/basic_ostringstream.html">std::ostringstream</a> oss;</div>
<div class="line">    oss &lt;&lt; <span class="stringliteral">&quot;worker &quot;</span> &lt;&lt; w.id() &lt;&lt; <span class="stringliteral">&quot; finished running &quot;</span> &lt;&lt; tv.name() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line">    <a class="code hl_classRef" href="http://en.cppreference.com/w/cpp/io/basic_ostream.html">std::cout</a> &lt;&lt; oss.str();</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(){</div>
<div class="line"> </div>
<div class="line">  <a class="code hl_class" href="classtf_1_1Executor.html">tf::Executor</a> executor(4);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Create a taskflow of eight tasks</span></div>
<div class="line">  <a class="code hl_class" href="classtf_1_1Taskflow.html">tf::Taskflow</a> taskflow;</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">auto</span> A = taskflow.<a class="code hl_function" href="classtf_1_1FlowBuilder.html#a60d7a666cab71ecfa3010b2efb0d6b57">emplace</a>([] () { <a class="code hl_classRef" href="http://en.cppreference.com/w/cpp/io/basic_ostream.html">std::cout</a> &lt;&lt; <span class="stringliteral">&quot;1\n&quot;</span>; }).name(<span class="stringliteral">&quot;A&quot;</span>);</div>
<div class="line">  <span class="keyword">auto</span> B = taskflow.<a class="code hl_function" href="classtf_1_1FlowBuilder.html#a60d7a666cab71ecfa3010b2efb0d6b57">emplace</a>([] () { <a class="code hl_classRef" href="http://en.cppreference.com/w/cpp/io/basic_ostream.html">std::cout</a> &lt;&lt; <span class="stringliteral">&quot;2\n&quot;</span>; }).name(<span class="stringliteral">&quot;B&quot;</span>);</div>
<div class="line">  <span class="keyword">auto</span> C = taskflow.<a class="code hl_function" href="classtf_1_1FlowBuilder.html#a60d7a666cab71ecfa3010b2efb0d6b57">emplace</a>([] () { <a class="code hl_classRef" href="http://en.cppreference.com/w/cpp/io/basic_ostream.html">std::cout</a> &lt;&lt; <span class="stringliteral">&quot;3\n&quot;</span>; }).name(<span class="stringliteral">&quot;C&quot;</span>);</div>
<div class="line">  <span class="keyword">auto</span> D = taskflow.<a class="code hl_function" href="classtf_1_1FlowBuilder.html#a60d7a666cab71ecfa3010b2efb0d6b57">emplace</a>([] () { <a class="code hl_classRef" href="http://en.cppreference.com/w/cpp/io/basic_ostream.html">std::cout</a> &lt;&lt; <span class="stringliteral">&quot;4\n&quot;</span>; }).name(<span class="stringliteral">&quot;D&quot;</span>);</div>
<div class="line">  <span class="keyword">auto</span> E = taskflow.<a class="code hl_function" href="classtf_1_1FlowBuilder.html#a60d7a666cab71ecfa3010b2efb0d6b57">emplace</a>([] () { <a class="code hl_classRef" href="http://en.cppreference.com/w/cpp/io/basic_ostream.html">std::cout</a> &lt;&lt; <span class="stringliteral">&quot;5\n&quot;</span>; }).name(<span class="stringliteral">&quot;E&quot;</span>);</div>
<div class="line">  <span class="keyword">auto</span> F = taskflow.<a class="code hl_function" href="classtf_1_1FlowBuilder.html#a60d7a666cab71ecfa3010b2efb0d6b57">emplace</a>([] () { <a class="code hl_classRef" href="http://en.cppreference.com/w/cpp/io/basic_ostream.html">std::cout</a> &lt;&lt; <span class="stringliteral">&quot;6\n&quot;</span>; }).name(<span class="stringliteral">&quot;F&quot;</span>);</div>
<div class="line">  <span class="keyword">auto</span> G = taskflow.<a class="code hl_function" href="classtf_1_1FlowBuilder.html#a60d7a666cab71ecfa3010b2efb0d6b57">emplace</a>([] () { <a class="code hl_classRef" href="http://en.cppreference.com/w/cpp/io/basic_ostream.html">std::cout</a> &lt;&lt; <span class="stringliteral">&quot;7\n&quot;</span>; }).name(<span class="stringliteral">&quot;G&quot;</span>);</div>
<div class="line">  <span class="keyword">auto</span> H = taskflow.<a class="code hl_function" href="classtf_1_1FlowBuilder.html#a60d7a666cab71ecfa3010b2efb0d6b57">emplace</a>([] () { <a class="code hl_classRef" href="http://en.cppreference.com/w/cpp/io/basic_ostream.html">std::cout</a> &lt;&lt; <span class="stringliteral">&quot;8\n&quot;</span>; }).name(<span class="stringliteral">&quot;H&quot;</span>);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// create an observer</span></div>
<div class="line">  <a class="code hl_classRef" href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr&lt;MyObserver&gt;</a> observer = executor.<a class="code hl_function" href="classtf_1_1Executor.html#aff77def96ae740d648dd84e571237c83">make_observer</a>&lt;MyObserver&gt;(</div>
<div class="line">    <span class="stringliteral">&quot;MyObserver&quot;</span></div>
<div class="line">  );</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// run the taskflow</span></div>
<div class="line">  executor.<a class="code hl_function" href="classtf_1_1Executor.html#a519777f5783981d534e9e53b99712069">run</a>(taskflow).get();</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// remove the observer (optional)</span></div>
<div class="line">  executor.<a class="code hl_function" href="classtf_1_1Executor.html#a31081f492c376f7b798de0e430534531">remove_observer</a>(<a class="code hl_functionRef" href="http://en.cppreference.com/w/cpp/utility/move.html">std::move</a>(observer));</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="abasic_ostringstream_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/io/basic_ostringstream.html">std::ostringstream</a></div></div>
<div class="ttc" id="abasic_string_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a></div></div>
<div class="ttc" id="aclasstf_1_1Executor_html_a31081f492c376f7b798de0e430534531"><div class="ttname"><a href="classtf_1_1Executor.html#a31081f492c376f7b798de0e430534531">tf::Executor::remove_observer</a></div><div class="ttdeci">void remove_observer(std::shared_ptr&lt; Observer &gt; observer)</div><div class="ttdoc">removes an observer from the executor</div><div class="ttdef"><b>Definition</b> executor.hpp:1057</div></div>
<div class="ttc" id="aclasstf_1_1Executor_html_aff77def96ae740d648dd84e571237c83"><div class="ttname"><a href="classtf_1_1Executor.html#aff77def96ae740d648dd84e571237c83">tf::Executor::make_observer</a></div><div class="ttdeci">std::shared_ptr&lt; Observer &gt; make_observer(ArgsT &amp;&amp;... args)</div><div class="ttdoc">constructs an observer to inspect the activities of worker threads</div><div class="ttdef"><b>Definition</b> executor.hpp:1038</div></div>
<div class="ttc" id="aclasstf_1_1ObserverInterface_html"><div class="ttname"><a href="classtf_1_1ObserverInterface.html">tf::ObserverInterface</a></div><div class="ttdoc">class to derive an executor observer</div><div class="ttdef"><b>Definition</b> observer.hpp:169</div></div>
<div class="ttc" id="ashared_ptr_html"><div class="ttname"><a href="http://en.cppreference.com/w/cpp/memory/shared_ptr.html">std::shared_ptr</a></div></div>
<div class="ttc" id="ataskflow_8hpp_html"><div class="ttname"><a href="taskflow_8hpp.html">taskflow.hpp</a></div><div class="ttdoc">main taskflow include file</div></div>
</div><!-- fragment --><p>The above code produces the following output:</p>
<div class="fragment"><div class="line">constructing observer MyObserver</div>
<div class="line">setting up observer with 4 workers</div>
<div class="line">worker 2 ready to run A</div>
<div class="line">1</div>
<div class="line">worker 2 finished running A</div>
<div class="line">worker 2 ready to run B</div>
<div class="line">2</div>
<div class="line">worker 1 ready to run C</div>
<div class="line">worker 2 finished running B</div>
<div class="line">3</div>
<div class="line">worker 2 ready to run D</div>
<div class="line">worker 3 ready to run E</div>
<div class="line">worker 1 finished running C</div>
<div class="line">4</div>
<div class="line">5</div>
<div class="line">worker 1 ready to run F</div>
<div class="line">worker 2 finished running D</div>
<div class="line">worker 3 finished running E</div>
<div class="line">6</div>
<div class="line">worker 2 ready to run G</div>
<div class="line">worker 3 ready to run H</div>
<div class="line">worker 1 finished running F</div>
<div class="line">7</div>
<div class="line">8</div>
<div class="line">worker 2 finished running G</div>
<div class="line">worker 3 finished running H</div>
</div><!-- fragment --><p>It is expected each line of <a class="elRef" href="http://en.cppreference.com/w/cpp/io/basic_ostream.html">std::cout</a> interleaves with each other as there are four workers participating in task scheduling. However, the <em>ready</em> message always appears before the corresponding task message (e.g., numbers) and then the <em>finished</em> message. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="Cookbook.html">Cookbook</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
